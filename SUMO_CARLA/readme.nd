# SUMO-CARLA Agent Spawning Pipeline

This project integrates agent-based simulation between **SUMO** (Simulation of Urban Mobility) and **CARLA** (Car Learning to Act), enabling dynamic spawning of vehicles and pedestrians with configurable behaviors and densities.

---

## âœ… Features Completed

### 1. Vehicle Spawner
- Spawns vehicles based on percentage distribution.
- Vehicle types (e.g., `private`, `taxi`, `bus`) are defined dynamically.
- Supports behavior profiles (`aggressive`, `normal`, `conservative`) with attributes like `speedFactor` and `impatience`.

### 2. Pedestrian Spawner
- Spawns pedestrians based on a configurable **density** in people/mÂ².
- Assigns random walking paths on a known edge from the network file.

### 3. Configurable Parameters
- YAML-based configuration for:
  - Vehicle distribution %
  - Behavior profiles
  - Pedestrian density

### 4. Simulation Orchestration
- `orchestrator.py` runs the full simulation:
  - Loads network and route
  - Spawns all agents
  - Logs summary stats into JSON output

### 5. Output
- Agent counts are stored in:
output/sim_stats.json

css
Copy
Edit
Example:
```json
{
  "vehicles": {
    "private": 60,
    "taxi": 10,
    "bus": 30
  },
  "pedestrians": 50
}
ğŸ›  Directory Structure
bash
Copy
Edit
SUMO_CARLA/
â”œâ”€â”€ sim/
â”‚   â”œâ”€â”€ agents/
â”‚   â”‚   â”œâ”€â”€ vehicle_spawner.py
â”‚   â”‚   â””â”€â”€ pedestrian_spawner.py
â”‚   â”œâ”€â”€ tests/
â”‚   â”‚   â””â”€â”€ test_spawners.py
â”‚   â”œâ”€â”€ orchestrator.py
â”‚   â””â”€â”€ config/
â”‚       â””â”€â”€ defaults.yml
â”œâ”€â”€ sim/assets/
â”‚   â”œâ”€â”€ route.rou.xml
â”‚   â””â”€â”€ demo_scene.net.xml
â””â”€â”€ output/
    â””â”€â”€ sim_stats.json
ğŸ Running the Simulation
Start CARLA (if required):

bash
Copy
Edit
sudo docker run --rm -it --gpus all --privileged --net=host \
   --shm-size=2g \
   carlasim/carla:0.9.15 \
   bash -c "./CarlaUE4.sh -opengl -carla-server -nosound -RenderOffScreen -quality-level=Low"
Run the simulation:

bash
Copy
Edit
PYTHONPATH=. python sim/orchestrator.py \
  --config config/defaults.yml \
  --net xodr_sumo_carla_pipeline/demo_scene.net.xml \
  --route sim/assets/route.rou.xml
Run unit tests (optional):

bash
Copy
Edit
PYTHONPATH=. python sim/tests/test_spawners.py --config config/defaults.yml
ğŸ§ª Test Results (Completed âœ…)
 Spawned 100 vehicles in correct proportions

 Spawned 50 pedestrians with set density

 Simulation logs agent counts to JSON

 Dynamic vehicle type creation validated

 No SUMO/TraCI sync errors

ğŸ“‹ Requirements
Python â‰¥ 3.8

SUMO â‰¥ 1.4.0

Carla â‰¥ 0.9.15

Docker (for running CARLA)

TraCI bindings (traci Python module)

ğŸš§ Next Steps (Optional)
Synchronize SUMO trajectories with CARLA actors

Add scenario-based triggers (e.g., traffic lights, collisions)

Visual validation of pedestrian paths

Co-simulation feedback between CARLA and SUMO

License
This project is for research and prototyping. Use at your own risk. Contributions welcome!

css
Copy
Edit

Let me know if you also want a `.zip` version or want to push this to a GitHub repo.
